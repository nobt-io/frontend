sudo: false
language: node_js
node_js:
- '6'
cache:
  directories:
  - node_modules
install:
- npm install
script:
- npm run compile
- npm run test
before_deploy:
- pip install --user awscli
- npm run deploy
deploy:
  - provider: script
    skip_cleanup: true
    script: .aws/deploy
    access_key_id: AKIAIF35EA6NPCKM7MXA
    on:
      branch: master
      repo: nobt-io/frontend
  - provider: script
    skip_cleanup: true
    script: .sentry/upload-sourcemaps
    on:
      branch: master
      repo: nobt-io/frontend
notifications:
  email:
    # Disable email notifications
    on_success: never
    on_failure: never
  slack:
    # Enable slack notifications with default behaviour of email
    secure: URSq5SE9Zj7Dj7MTt0elnPb8ptuaQ30Jf+Cuo1Rt54OY1SLIxGp4o9nzusAaa9obxXrRAJZydF6u3sUaj4U8EnONX6odYEY0+6GLQ07FT5Frdx620ns/2FNvcSOV1TYPHQZC8xqvddivZVDh4t2g1jVlxHnLgIPGhpiSVfZuIgX1c8DeWC8RshcLxutg8jtPRF89c9ReNB1il9/ZAgH49bnxkW1Q1vngipjvbZr+jO6dZe86/07mCln1tfLv6E+r8HyJ5W9zFG+lMuypPl+9XzDtTDu7TW9juixVMsm/JKiBwivex9fPh6S+0/z5SLUY4mVVeOp1TGj/fL+6Bv4ZzaQvZSwww/XjpeMu+qfN7vkumWhowHJwz4ZvorG9jAhGzi34m3NG9/YcAHnpU0aZopVlUMDchboantZqUuicd9tTdJcfTN3LSJK0bcpr/vvuoEQDnI7Z/qu5X5aLkNTM6c96vAIuC13TwEtjiVV1t4D9sWl8H6si38ktruLzOIKCXZ/xq+zeOdxPl2sj8v+/DMYxRrq09qC/LYUAkf6qU1nhy7dAzhQyBu/hdQPSdGLHsmBhvp0zBTgOoZ5+gJH8ycMCOhAdyPnrjYmgL6XaL0qEI0hEdnfrlXSYK6/tUqhCzU0IHL+is/WphDuWRFtbNVbMlCxZ1Dyeyx+3kxVitCA=
    on_success: always
    on_failure: always
